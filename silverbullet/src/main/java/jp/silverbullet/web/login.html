<!DOCTYPE html>
<html>
<script type="text/javascript" src="lib/jquery-3.3.1.min.js"></script> 
<script type="text/javascript" src="lib/jquery-ui.js"></script>

<script type="text/javascript" src="login.js"></script>

<script type="text/javascript">
$(function() {
	$(document).ready(function(){
		function getArgMap() {
			var argMap = new Map();
			var args = window.location.search;
			for (var arg of args.split('&')) {
				var item = arg.split('=')[0].replace('?', '');
				var value = arg.split('=')[1];
				
				argMap.set(item, value);
			}
			return argMap;
		}	
		var argMap = getArgMap();
		
		function getArgValue(arg) {
			if (argMap.has(arg)) {
				return argMap.get(arg);
			}
			return "";
		}
		
		$('#login').click(function() {
			$.ajax({
				type: "GET", 
				url: window.location.origin + "/rest/nativeLogin?username=" + $('#username').val()
					+ '&password=' + $('#password').val(),
					
				success: function(response) {
					window.location.href = getArgValue('redirectUri');
				},
				error: function(response) {
					alert(response);
				}
			});	
		});
			
		$('#create').click(function() {
				$.ajax({
					type: "GET", 
					url: window.location.origin + "/rest/nativeCreate?username=" + $('#username').val()
						+ '&password=' + $('#password').val(),
						
					success: function(response) {
						window.location.href = getArgValue('redirectUri');
					},
					error: function(response) {
						alert(response);
					}
				});	
		});
	});
	

	
});
</script>
<link rel="stylesheet" type="text/css" href="lib/jquery-ui.css">

<head>
<meta charset="UTF-8">
<title>Login</title>
</head>
<body> 

<div>Username:<input type="text" id="username"></div>
<div>Password:<input type="password" id="password"></div>
<div><button id="login">Login</button><button id="create">Create Account</button></div>
</body>
</html>